{
  "journal": [
    {
      "date": 1502358656493,
      "type": "create",
      "item": {
        "story": "",
        "title": "DreamFactory Wiki Files"
      }
    },
    {
      "type": "fork",
      "date": 1502358653631
    },
    {
      "type": "add",
      "id": "18d6c89ff4619626",
      "item": {
        "type": "paragraph",
        "id": "18d6c89ff4619626",
        "text": "# Aims"
      },
      "after": "33f39cf6a353bcfd",
      "date": 1502358681071
    },
    {
      "type": "add",
      "id": "6c02f1cb2a7f46ae",
      "item": {
        "type": "paragraph",
        "id": "6c02f1cb2a7f46ae",
        "text": "# Current Issues"
      },
      "after": "18d6c89ff4619626",
      "date": 1502358682708
    },
    {
      "type": "edit",
      "id": "6c02f1cb2a7f46ae",
      "item": {
        "type": "markdown",
        "id": "6c02f1cb2a7f46ae",
        "text": "# Current Issues"
      },
      "date": 1502358683850
    },
    {
      "type": "add",
      "id": "95cc7ef56a48d233",
      "item": {
        "type": "paragraph",
        "id": "95cc7ef56a48d233",
        "text": "We are looking to add a [[Decentralised Media Commons]] functionality to wiki, using the [[Permanent Web]]."
      },
      "after": "18d6c89ff4619626",
      "date": 1502358726318
    },
    {
      "type": "edit",
      "id": "18d6c89ff4619626",
      "item": {
        "type": "markdown",
        "id": "18d6c89ff4619626",
        "text": "# Aims"
      },
      "date": 1502358728032
    },
    {
      "type": "add",
      "id": "ebe8f6c5b6ebdd87",
      "item": {
        "type": "paragraph",
        "id": "ebe8f6c5b6ebdd87",
        "text": "We seek to achieve this by adding asset management to wiki, and linking this to "
      },
      "after": "95cc7ef56a48d233",
      "date": 1502358763678
    },
    {
      "type": "edit",
      "id": "ebe8f6c5b6ebdd87",
      "item": {
        "type": "paragraph",
        "id": "ebe8f6c5b6ebdd87",
        "text": "We seek to achieve this by adding asset management to wiki, and linking this to a [[DreamFactory IPFS Service]], which will automatically add media files to IPFS, while at the same time making them available to wiki in a convenient way."
      },
      "date": 1502358814249
    },
    {
      "type": "add",
      "id": "00bf86b4a5a1b1b3",
      "item": {
        "type": "paragraph",
        "id": "00bf86b4a5a1b1b3",
        "text": "# File naming"
      },
      "after": "ebe8f6c5b6ebdd87",
      "date": 1502358819769
    },
    {
      "type": "add",
      "id": "30d01b35b8cfecec",
      "item": {
        "type": "paragraph",
        "id": "30d01b35b8cfecec",
        "text": "More important than the actual location of the media files, is the file naming. We are proposing naming the files with an IPFS prefix, and a mime type (media) suffix."
      },
      "after": "00bf86b4a5a1b1b3",
      "date": 1502358880010
    },
    {
      "type": "add",
      "id": "f7143ca41f455c00",
      "item": {
        "type": "paragraph",
        "id": "f7143ca41f455c00",
        "text": "This way all the media files can be in a single folder without name clashes."
      },
      "after": "30d01b35b8cfecec",
      "date": 1502358939528
    },
    {
      "type": "edit",
      "id": "00bf86b4a5a1b1b3",
      "item": {
        "type": "markdown",
        "id": "00bf86b4a5a1b1b3",
        "text": "# File naming"
      },
      "date": 1502358977990
    },
    {
      "type": "add",
      "id": "0a17fd19963405ee",
      "item": {
        "type": "paragraph",
        "id": "0a17fd19963405ee",
        "text": "# Asset folder"
      },
      "after": "f7143ca41f455c00",
      "date": 1502358990691
    },
    {
      "type": "add",
      "id": "d30b44b040ee04d5",
      "item": {
        "type": "paragraph",
        "id": "d30b44b040ee04d5",
        "text": "We should probably discuss creating a new asset folder structure for wiki. Currently we use the [[Fedwiki Theme Folder]] for each domain (which is a bit ugly)."
      },
      "after": "0a17fd19963405ee",
      "date": 1502359054612
    },
    {
      "type": "add",
      "id": "894967fef5bc31b2",
      "item": {
        "type": "paragraph",
        "id": "894967fef5bc31b2",
        "text": "I am proposing using a new toplevel assets folder:"
      },
      "after": "d30b44b040ee04d5",
      "date": 1502359073118
    },
    {
      "type": "edit",
      "id": "0a17fd19963405ee",
      "item": {
        "type": "markdown",
        "id": "0a17fd19963405ee",
        "text": "# Asset folder"
      },
      "date": 1502359074029
    },
    {
      "item": {
        "type": "factory",
        "id": "a603c46217a51b8f"
      },
      "id": "a603c46217a51b8f",
      "type": "add",
      "after": "c1bc01f2-f2d8-4160-9d25-85a3905e539a",
      "date": 1502359075992
    },
    {
      "type": "move",
      "order": [
        "33f39cf6a353bcfd",
        "18d6c89ff4619626",
        "95cc7ef56a48d233",
        "ebe8f6c5b6ebdd87",
        "00bf86b4a5a1b1b3",
        "30d01b35b8cfecec",
        "f7143ca41f455c00",
        "0a17fd19963405ee",
        "d30b44b040ee04d5",
        "894967fef5bc31b2",
        "a603c46217a51b8f",
        "6c02f1cb2a7f46ae",
        "753e8af8d337bc3b",
        "0f77add2f848754c",
        "9dae710b0551ce85",
        "a8234addc6972d28",
        "2eb75fe09f2797ce",
        "baea744b059424ae",
        "8d3ef6ca5392ee11",
        "c1bc01f2-f2d8-4160-9d25-85a3905e539a"
      ],
      "id": "a603c46217a51b8f",
      "date": 1502359081274
    },
    {
      "type": "edit",
      "id": "a603c46217a51b8f",
      "item": {
        "type": "code",
        "id": "a603c46217a51b8f",
        "text": "assets/\npages/\nstatus/"
      },
      "date": 1502359104798
    },
    {
      "type": "edit",
      "id": "894967fef5bc31b2",
      "item": {
        "type": "paragraph",
        "id": "894967fef5bc31b2",
        "text": "I am proposing using a new toplevel assets folder, with subfolders corresponding to wiki page slugs:"
      },
      "date": 1502359127436
    },
    {
      "type": "edit",
      "id": "a603c46217a51b8f",
      "item": {
        "type": "code",
        "id": "a603c46217a51b8f",
        "text": "assets/\n david-bovill\n welcome-visiters/\npages/\nstatus/"
      },
      "date": 1502359142646
    },
    {
      "type": "add",
      "id": "fe4bfc075e15540b",
      "item": {
        "type": "paragraph",
        "id": "fe4bfc075e15540b",
        "text": "However it may be better to keep a toplevel only structure, and use this IPFS short filename hack (see above) - as this would enable a script to work out the file location based on the short file both in IPFS and as a conventional file within the assets folder."
      },
      "after": "894967fef5bc31b2",
      "date": 1502359318625
    },
    {
      "type": "edit",
      "id": "33f39cf6a353bcfd",
      "item": {
        "text": "Here we look at how we can provide proper [[RESTful]] access to [[Fedwiki Files]] from multiple domains using [[DreamFactory]].",
        "id": "33f39cf6a353bcfd",
        "type": "paragraph"
      },
      "date": 1502367359238
    },
    {
      "item": {
        "type": "factory",
        "id": "dce3b8fb1ad2706a"
      },
      "id": "dce3b8fb1ad2706a",
      "type": "add",
      "after": "c1bc01f2-f2d8-4160-9d25-85a3905e539a",
      "date": 1502372689135
    },
    {
      "type": "edit",
      "id": "dce3b8fb1ad2706a",
      "item": {
        "type": "code",
        "id": "dce3b8fb1ad2706a",
        "text": "/opt/dreamfactory/storage/app"
      },
      "date": 1502372714292
    },
    {
      "type": "move",
      "order": [
        "33f39cf6a353bcfd",
        "dce3b8fb1ad2706a",
        "18d6c89ff4619626",
        "95cc7ef56a48d233",
        "ebe8f6c5b6ebdd87",
        "00bf86b4a5a1b1b3",
        "30d01b35b8cfecec",
        "f7143ca41f455c00",
        "0a17fd19963405ee",
        "d30b44b040ee04d5",
        "894967fef5bc31b2",
        "fe4bfc075e15540b",
        "a603c46217a51b8f",
        "6c02f1cb2a7f46ae",
        "753e8af8d337bc3b",
        "0f77add2f848754c",
        "9dae710b0551ce85",
        "a8234addc6972d28",
        "2eb75fe09f2797ce",
        "baea744b059424ae",
        "8d3ef6ca5392ee11",
        "c1bc01f2-f2d8-4160-9d25-85a3905e539a"
      ],
      "id": "dce3b8fb1ad2706a",
      "date": 1502372734572
    },
    {
      "type": "add",
      "id": "8a64d5a4f452c43d",
      "item": {
        "type": "paragraph",
        "id": "8a64d5a4f452c43d",
        "text": "The files managed by [[DreamFactory]] are found in the following directory:"
      },
      "after": "33f39cf6a353bcfd",
      "date": 1502372841257
    },
    {
      "type": "add",
      "id": "d8b6e0ed8154e73b",
      "item": {
        "type": "paragraph",
        "id": "d8b6e0ed8154e73b",
        "text": "# Scenarios"
      },
      "after": "ebe8f6c5b6ebdd87",
      "date": 1502374188816
    },
    {
      "type": "edit",
      "id": "d8b6e0ed8154e73b",
      "item": {
        "type": "markdown",
        "id": "d8b6e0ed8154e73b",
        "text": "# Scenarios"
      },
      "date": 1502374246144
    },
    {
      "type": "add",
      "id": "3bae1e12b9441d99",
      "item": {
        "type": "paragraph",
        "id": "3bae1e12b9441d99",
        "text": "The advantage of using a decentralised copy of the file (ie on IPFS). is that we have a decentralised backup, and we can use the wiki page files"
      },
      "after": "d8b6e0ed8154e73b",
      "date": 1502374791557
    },
    {
      "type": "edit",
      "id": "c1bc01f2-f2d8-4160-9d25-85a3905e539a",
      "item": {
        "type": "markdown",
        "id": "c1bc01f2-f2d8-4160-9d25-85a3905e539a",
        "text": "# See also\n\n- [[Archive File Naming Convention]]\n- [[DreamFactory IPFS Service]]\n- [[Fedwiki Theme Folder]]"
      },
      "date": 1503088220939
    }
  ],
  "title": "DreamFactory Wiki Files",
  "story": [
    {
      "text": "Here we look at how we can provide proper [[RESTful]] access to [[Fedwiki Files]] from multiple domains using [[DreamFactory]].",
      "id": "33f39cf6a353bcfd",
      "type": "paragraph"
    },
    {
      "type": "paragraph",
      "id": "8a64d5a4f452c43d",
      "text": "The files managed by [[DreamFactory]] are found in the following directory:"
    },
    {
      "type": "code",
      "id": "dce3b8fb1ad2706a",
      "text": "/opt/dreamfactory/storage/app"
    },
    {
      "type": "markdown",
      "id": "18d6c89ff4619626",
      "text": "# Aims"
    },
    {
      "type": "paragraph",
      "id": "95cc7ef56a48d233",
      "text": "We are looking to add a [[Decentralised Media Commons]] functionality to wiki, using the [[Permanent Web]]."
    },
    {
      "type": "paragraph",
      "id": "ebe8f6c5b6ebdd87",
      "text": "We seek to achieve this by adding asset management to wiki, and linking this to a [[DreamFactory IPFS Service]], which will automatically add media files to IPFS, while at the same time making them available to wiki in a convenient way."
    },
    {
      "type": "markdown",
      "id": "d8b6e0ed8154e73b",
      "text": "# Scenarios"
    },
    {
      "type": "paragraph",
      "id": "3bae1e12b9441d99",
      "text": "The advantage of using a decentralised copy of the file (ie on IPFS). is that we have a decentralised backup, and we can use the wiki page files"
    },
    {
      "type": "markdown",
      "id": "00bf86b4a5a1b1b3",
      "text": "# File naming"
    },
    {
      "type": "paragraph",
      "id": "30d01b35b8cfecec",
      "text": "More important than the actual location of the media files, is the file naming. We are proposing naming the files with an IPFS prefix, and a mime type (media) suffix."
    },
    {
      "type": "paragraph",
      "id": "f7143ca41f455c00",
      "text": "This way all the media files can be in a single folder without name clashes."
    },
    {
      "type": "markdown",
      "id": "0a17fd19963405ee",
      "text": "# Asset folder"
    },
    {
      "type": "paragraph",
      "id": "d30b44b040ee04d5",
      "text": "We should probably discuss creating a new asset folder structure for wiki. Currently we use the [[Fedwiki Theme Folder]] for each domain (which is a bit ugly)."
    },
    {
      "type": "paragraph",
      "id": "894967fef5bc31b2",
      "text": "I am proposing using a new toplevel assets folder, with subfolders corresponding to wiki page slugs:"
    },
    {
      "type": "paragraph",
      "id": "fe4bfc075e15540b",
      "text": "However it may be better to keep a toplevel only structure, and use this IPFS short filename hack (see above) - as this would enable a script to work out the file location based on the short file both in IPFS and as a conventional file within the assets folder."
    },
    {
      "type": "code",
      "id": "a603c46217a51b8f",
      "text": "assets/\n david-bovill\n welcome-visiters/\npages/\nstatus/"
    },
    {
      "type": "markdown",
      "id": "6c02f1cb2a7f46ae",
      "text": "# Current Issues"
    },
    {
      "text": "A standard DreamFactory HTTP GET call to access a file looks like:",
      "id": "753e8af8d337bc3b",
      "type": "paragraph"
    },
    {
      "text": "http://culturecollective.cc/api/v2/wiki/pages/hello?\napi_key=[[API Key]]",
      "id": "0f77add2f848754c",
      "type": "code"
    },
    {
      "text": "This is not quite working.",
      "id": "9dae710b0551ce85",
      "type": "paragraph"
    },
    {
      "text": "curl -X GET \n--header 'Accept: application/octet-stream' \n--header 'X-DreamFactory-Api-Key: [[api key]]' \n--header 'X-DreamFactory-Session-Token: [[session token]]' \n'http://culturecollective.cc/api/v2/wiki/%2Fpages%2Fhello?download=false'\n",
      "id": "a8234addc6972d28",
      "type": "code"
    },
    {
      "text": "# Examples\n\nHere are some examples of interacting with Dreamfactory:",
      "id": "2eb75fe09f2797ce",
      "type": "markdown"
    },
    {
      "text": "curl -i -k -3 -X POST \"http://culturecollective.cc/api/v2/user/session\" -d '{ \"email\" : \"david@feast.fm\", \"password\" : \"pass123\" }' -H \"Content-Type: application/json\"",
      "id": "baea744b059424ae",
      "type": "code"
    },
    {
      "text": "or equivalently:",
      "id": "8d3ef6ca5392ee11",
      "type": "paragraph"
    },
    {
      "type": "markdown",
      "id": "c1bc01f2-f2d8-4160-9d25-85a3905e539a",
      "text": "# See also\n\n- [[Archive File Naming Convention]]\n- [[DreamFactory IPFS Service]]\n- [[Fedwiki Theme Folder]]"
    }
  ]
}