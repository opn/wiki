{
  "title": "Adding a new site",
  "story": [
    {
      "type": "paragraph",
      "id": "62022a6b10bffe0b",
      "text": "Here we look at how you add a new fedwiki site to your server. How you point [[DNS A Records]] to your server, configure your wiki, and add credentials to Google."
    },
    {
      "type": "video",
      "id": "0b1fd52d786258e2",
      "text": "VIMEO 229833158\n(double-click to edit caption)\n"
    },
    {
      "type": "markdown",
      "id": "1b8ed09223393a90",
      "text": "# Dynadot settings"
    },
    {
      "type": "paragraph",
      "id": "74abd51c34f3d453",
      "text": "Below you can see the setting for a typical domain on [[Dynadot]].  The example is for the platform.earth web site:"
    },
    {
      "type": "html",
      "id": "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
      "text": "<div style='padding: 12px; background:#eee; width:96%; align=centered;'>\n<a href='http://admin.fedwiki.org/assets/Screen%20Shot%202018-03-08%20at%2011.26.06.png' target='_blank'>\n<img style='display:block; margin:auto; width:100%;'\nsrc='http://admin.fedwiki.org/assets/Screen%20Shot%202018-03-08%20at%2011.26.06.png'>\n</a>\n\n<p class=caption>\nThis is an image\n- [http://admin.fedwiki.org/assets/Screen%20Shot%202018-03-08%20at%2011.26.06.png fedwiki.org]\n</p></div>"
    },
    {
      "type": "paragraph",
      "id": "4032c03f4b0b9dce",
      "text": "The top-level A records are set to hosting with [[Webflow]] on the following ip addresses:"
    },
    {
      "type": "code",
      "id": "c4481d294b1ae35c",
      "text": "A  23.235.33.229  (platform.earth)\nA  104.156.81.229  (platform.earth)\n"
    },
    {
      "type": "paragraph",
      "id": "d6deca48fac99843",
      "text": "A subdomain (hack.platform.earth) is pointing to the [[Atopia Wiki Farm]]."
    },
    {
      "type": "code",
      "id": "1bf6ed84606767cb",
      "text": "A  46.101.23.193  (hack.platform.earth)"
    },
    {
      "type": "markdown",
      "id": "e8d58335129c618b",
      "text": "# Restart server\n\nWe can use the shell plugin to restart the server:"
    },
    {
      "type": "shell",
      "id": "5ab60946ef8c71c6",
      "text": "restart wiki"
    },
    {
      "type": "paragraph",
      "id": "793b76a59850c7bc",
      "text": "May complain of an error, but it seems to restart OK if you wait a little."
    },
    {
      "type": "markdown",
      "id": "e282e02c01df1053",
      "text": "# Setting the A records"
    },
    {
      "type": "paragraph",
      "id": "05f38fdbdf15b0ae",
      "text": "It can take a little while to update the DNS records. Check the progress using [[Domain Name Tools]]. In particular to check [[DNS propagation]] - [https://www.whatsmydns.net/ whatsmydns.net]"
    },
    {
      "type": "paragraph",
      "id": "d675ac0b8990c16a",
      "text": "even when (according to whatsmydns) the ip address has changed to the [[Atopia wiki Farm]] ip address, the old site is still being served."
    },
    {
      "type": "markdown",
      "id": "a2e841e1bbe05146",
      "text": "# See also\n\n- [[Wiki Admin]]\n- [[Adding a new site]]\n- [[Dynamic Nginx Reconfiguration]]"
    },
    {
      "type": "markdown",
      "id": "c2ab48db121dbda3",
      "text": "- [[Domain Names]]\n- [[Domain Registration]]\n- [[DNS propagation]]\n- [[Name Servers]]\n- [[DNS]]"
    },
    {
      "type": "markdown",
      "id": "ab633c9afaaf35d7",
      "text": "- [[Domain Name Tools]]\n- [[IP Lookup Tool]]\n- [[WHOIS]]\n- [[Domain API]]\n"
    },
    {
      "type": "markdown",
      "id": "c2ab48db121dbda3",
      "text": "- [[Domain Names]]\n- [[Domain API]]\n- [[DNS propagation]]\n- [[IP Lookup Tool]]\n- [[WHOIS]]\n"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Adding a new site",
        "story": []
      },
      "date": 1502879919769
    },
    {
      "item": {
        "type": "factory",
        "id": "62022a6b10bffe0b"
      },
      "id": "62022a6b10bffe0b",
      "type": "add",
      "date": 1502879923494
    },
    {
      "type": "edit",
      "id": "62022a6b10bffe0b",
      "item": {
        "type": "paragraph",
        "id": "62022a6b10bffe0b",
        "text": "Here we look at how you add a new fedwiki site to your server. How you point [[DNS A Records]] to your server, configure your wiki, and add credentials to Google."
      },
      "date": 1502879990918
    },
    {
      "item": {
        "type": "factory",
        "id": "0b1fd52d786258e2"
      },
      "id": "0b1fd52d786258e2",
      "type": "add",
      "after": "62022a6b10bffe0b",
      "date": 1502879992078
    },
    {
      "type": "edit",
      "id": "0b1fd52d786258e2",
      "item": {
        "type": "video",
        "id": "0b1fd52d786258e2",
        "text": "VIMEO 229833158\n(double-click to edit caption)\n"
      },
      "date": 1502881015577
    },
    {
      "item": {
        "type": "factory",
        "id": "1b8ed09223393a90"
      },
      "id": "1b8ed09223393a90",
      "type": "add",
      "after": "0b1fd52d786258e2",
      "date": 1520508476684
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "124f2242fb0531a1",
        "text": "# Drop in\n\n- To our chat - [https://vector.im/beta/#/room/#fedwiki:matrix.org vector.im]\n- Face chat - [https://appear.in/fedwiki https://appear.in/fedwiki appear.in]\n\n\n"
      },
      "after": "0b1fd52d786258e2",
      "id": "124f2242fb0531a1",
      "date": 1520508497778
    },
    {
      "type": "remove",
      "id": "124f2242fb0531a1",
      "date": 1520508505800
    },
    {
      "type": "add",
      "item": {
        "type": "html",
        "id": "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
        "text": "<div style='padding: 12px; background:#eee; width:96%; align=centered;'>\n<a href='http://admin.fedwiki.org/assets/Screen%20Shot%202018-03-08%20at%2011.26.06.png' target='_blank'>\n<img style='display:block; margin:auto; width:100%;'\nsrc='http://admin.fedwiki.org/assets/Screen%20Shot%202018-03-08%20at%2011.26.06.png'>\n</a>\n\n<p class=caption>\nThis is an image\n- [http://admin.fedwiki.org/assets/Screen%20Shot%202018-03-08%20at%2011.26.06.png fedwiki.org]\n</p></div>"
      },
      "after": "1b8ed09223393a90",
      "id": "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
      "date": 1520508738763
    },
    {
      "type": "edit",
      "id": "1b8ed09223393a90",
      "item": {
        "type": "paragraph",
        "id": "1b8ed09223393a90",
        "text": "# Dynadot settings"
      },
      "date": 1520508769489
    },
    {
      "type": "add",
      "id": "74abd51c34f3d453",
      "item": {
        "type": "paragraph",
        "id": "74abd51c34f3d453",
        "text": "Below you can see the setting for a typical domain on [[Dynadot]]. The top-level A records are set to hosting with [[Webflow]] on the following ip addresses:"
      },
      "after": "1b8ed09223393a90",
      "date": 1520508833711
    },
    {
      "item": {
        "type": "factory",
        "id": "c4481d294b1ae35c"
      },
      "id": "c4481d294b1ae35c",
      "type": "add",
      "after": "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
      "date": 1520508843498
    },
    {
      "type": "edit",
      "id": "c4481d294b1ae35c",
      "item": {
        "type": "code",
        "id": "c4481d294b1ae35c",
        "text": "A  23.235.33.229"
      },
      "date": 1520508849408
    },
    {
      "type": "edit",
      "id": "74abd51c34f3d453",
      "item": {
        "type": "paragraph",
        "id": "74abd51c34f3d453",
        "text": "Below you can see the setting for a typical domain on [[Dynadot]]. "
      },
      "date": 1520508860843
    },
    {
      "type": "add",
      "id": "4032c03f4b0b9dce",
      "item": {
        "type": "paragraph",
        "id": "4032c03f4b0b9dce",
        "text": "The top-level A records are set to hosting with [[Webflow]] on the following ip addresses:"
      },
      "after": "74abd51c34f3d453",
      "date": 1520508862944
    },
    {
      "type": "edit",
      "id": "c4481d294b1ae35c",
      "item": {
        "type": "code",
        "id": "c4481d294b1ae35c",
        "text": "platform.earth.\t\t10800\tIN\tA\t23.235.33.229\nplatform.earth.\t\t10800\tIN\tA\t104.156.81.229\n"
      },
      "date": 1520508908390
    },
    {
      "type": "edit",
      "id": "c4481d294b1ae35c",
      "item": {
        "type": "code",
        "id": "c4481d294b1ae35c",
        "text": "platform.earth. 10800\tIN\tA\t23.235.33.229\nplatform.earth. 10800\tIN\tA\t104.156.81.229\n"
      },
      "date": 1520508921819
    },
    {
      "type": "edit",
      "id": "c4481d294b1ae35c",
      "item": {
        "type": "code",
        "id": "c4481d294b1ae35c",
        "text": "platform.earth A 23.235.33.229\nplatform.earth A 104.156.81.229\n"
      },
      "date": 1520508950323
    },
    {
      "type": "edit",
      "id": "c4481d294b1ae35c",
      "item": {
        "type": "code",
        "id": "c4481d294b1ae35c",
        "text": "A  23.235.33.229\nA  104.156.81.229\n"
      },
      "date": 1520508962373
    },
    {
      "type": "move",
      "order": [
        "62022a6b10bffe0b",
        "0b1fd52d786258e2",
        "1b8ed09223393a90",
        "74abd51c34f3d453",
        "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
        "4032c03f4b0b9dce",
        "c4481d294b1ae35c"
      ],
      "id": "4032c03f4b0b9dce",
      "date": 1520508966860
    },
    {
      "type": "edit",
      "id": "74abd51c34f3d453",
      "item": {
        "type": "paragraph",
        "id": "74abd51c34f3d453",
        "text": "Below you can see the setting for a typical domain on [[Dynadot]].  The example is for the platform.earth web site:"
      },
      "date": 1520508984924
    },
    {
      "type": "edit",
      "id": "1b8ed09223393a90",
      "item": {
        "type": "markdown",
        "id": "1b8ed09223393a90",
        "text": "# Dynadot settings"
      },
      "date": 1520508986611
    },
    {
      "item": {
        "type": "factory",
        "id": "d6deca48fac99843"
      },
      "id": "d6deca48fac99843",
      "type": "add",
      "after": "c4481d294b1ae35c",
      "date": 1520508994630
    },
    {
      "type": "edit",
      "id": "d6deca48fac99843",
      "item": {
        "type": "paragraph",
        "id": "d6deca48fac99843",
        "text": "A subdomain is pointing to the [[Atopia Wiki Farm]]."
      },
      "date": 1520509037561
    },
    {
      "type": "edit",
      "id": "d6deca48fac99843",
      "item": {
        "type": "paragraph",
        "id": "d6deca48fac99843",
        "text": "A subdomain (hack.platform.earht) is pointing to the [[Atopia Wiki Farm]]."
      },
      "date": 1520509064967
    },
    {
      "item": {
        "type": "factory",
        "id": "1bf6ed84606767cb"
      },
      "id": "1bf6ed84606767cb",
      "type": "add",
      "after": "d6deca48fac99843",
      "date": 1520509067273
    },
    {
      "type": "edit",
      "id": "1bf6ed84606767cb",
      "item": {
        "type": "code",
        "id": "1bf6ed84606767cb",
        "text": "A  46.101.23.193"
      },
      "date": 1520509093331
    },
    {
      "type": "edit",
      "id": "d6deca48fac99843",
      "item": {
        "type": "paragraph",
        "id": "d6deca48fac99843",
        "text": "A subdomain (hack.platform.earth) is pointing to the [[Atopia Wiki Farm]]."
      },
      "date": 1520509112576
    },
    {
      "type": "edit",
      "id": "1bf6ed84606767cb",
      "item": {
        "type": "code",
        "id": "1bf6ed84606767cb",
        "text": "hack.platform.earth A  46.101.23.193"
      },
      "date": 1520509114555
    },
    {
      "type": "edit",
      "id": "1bf6ed84606767cb",
      "item": {
        "type": "code",
        "id": "1bf6ed84606767cb",
        "text": "hack.platform.earth  A  46.101.23.193"
      },
      "date": 1520509120107
    },
    {
      "type": "edit",
      "id": "c4481d294b1ae35c",
      "item": {
        "type": "code",
        "id": "c4481d294b1ae35c",
        "text": "A  23.235.33.229  (platform.earth)\nA  104.156.81.229  (platform.earth)\n"
      },
      "date": 1520509145010
    },
    {
      "type": "edit",
      "id": "1bf6ed84606767cb",
      "item": {
        "type": "code",
        "id": "1bf6ed84606767cb",
        "text": "A  46.101.23.193  (platform.earth)"
      },
      "date": 1520509164499
    },
    {
      "type": "edit",
      "id": "1bf6ed84606767cb",
      "item": {
        "type": "code",
        "id": "1bf6ed84606767cb",
        "text": "A  46.101.23.193  (hack.platform.earth)"
      },
      "date": 1520509173708
    },
    {
      "item": {
        "type": "factory",
        "id": "a2e841e1bbe05146"
      },
      "id": "a2e841e1bbe05146",
      "type": "add",
      "after": "1bf6ed84606767cb",
      "date": 1520511097914
    },
    {
      "type": "edit",
      "id": "a2e841e1bbe05146",
      "item": {
        "type": "markdown",
        "id": "a2e841e1bbe05146",
        "text": "# See also\n\n- [[Wiki Admin]]"
      },
      "date": 1520511108460
    },
    {
      "item": {
        "type": "factory",
        "id": "e8d58335129c618b"
      },
      "id": "e8d58335129c618b",
      "type": "add",
      "after": "a2e841e1bbe05146",
      "date": 1520511121330
    },
    {
      "type": "move",
      "order": [
        "62022a6b10bffe0b",
        "0b1fd52d786258e2",
        "1b8ed09223393a90",
        "74abd51c34f3d453",
        "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
        "4032c03f4b0b9dce",
        "c4481d294b1ae35c",
        "d6deca48fac99843",
        "1bf6ed84606767cb",
        "e8d58335129c618b",
        "a2e841e1bbe05146"
      ],
      "id": "e8d58335129c618b",
      "date": 1520511123059
    },
    {
      "type": "edit",
      "id": "e8d58335129c618b",
      "item": {
        "type": "markdown",
        "id": "e8d58335129c618b",
        "text": "# Restart server\n\nWe can use the shell plugin to restart the server:"
      },
      "date": 1520511150915
    },
    {
      "type": "add",
      "item": {
        "type": "shell",
        "id": "5ab60946ef8c71c6",
        "text": "echo hello world\necho `npm prefix -g`/lib/node_modules/wiki\npwd"
      },
      "after": "e8d58335129c618b",
      "id": "5ab60946ef8c71c6",
      "date": 1520511154754
    },
    {
      "type": "edit",
      "id": "5ab60946ef8c71c6",
      "item": {
        "type": "shell",
        "id": "5ab60946ef8c71c6",
        "text": "stop wiki; start wiki"
      },
      "date": 1520511178867
    },
    {
      "type": "edit",
      "id": "5ab60946ef8c71c6",
      "item": {
        "type": "shell",
        "id": "5ab60946ef8c71c6",
        "text": "stop wiki"
      },
      "date": 1520511332315
    },
    {
      "item": {
        "type": "factory",
        "id": "f0c60c29a63cfd6d"
      },
      "id": "f0c60c29a63cfd6d",
      "type": "add",
      "after": "a2e841e1bbe05146",
      "date": 1520511336027
    },
    {
      "type": "edit",
      "id": "f0c60c29a63cfd6d",
      "item": {
        "type": "shell",
        "id": "f0c60c29a63cfd6d",
        "text": "start wiki"
      },
      "date": 1520511341868
    },
    {
      "type": "move",
      "order": [
        "62022a6b10bffe0b",
        "0b1fd52d786258e2",
        "1b8ed09223393a90",
        "74abd51c34f3d453",
        "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
        "4032c03f4b0b9dce",
        "c4481d294b1ae35c",
        "d6deca48fac99843",
        "1bf6ed84606767cb",
        "e8d58335129c618b",
        "5ab60946ef8c71c6",
        "f0c60c29a63cfd6d",
        "a2e841e1bbe05146"
      ],
      "id": "f0c60c29a63cfd6d",
      "date": 1520511343630
    },
    {
      "type": "edit",
      "id": "5ab60946ef8c71c6",
      "item": {
        "type": "shell",
        "id": "5ab60946ef8c71c6",
        "text": "restart wiki"
      },
      "date": 1520511362318
    },
    {
      "type": "remove",
      "id": "f0c60c29a63cfd6d",
      "date": 1520511364635
    },
    {
      "item": {
        "type": "factory",
        "id": "793b76a59850c7bc"
      },
      "id": "793b76a59850c7bc",
      "type": "add",
      "after": "a2e841e1bbe05146",
      "date": 1520511449773
    },
    {
      "type": "move",
      "order": [
        "62022a6b10bffe0b",
        "0b1fd52d786258e2",
        "1b8ed09223393a90",
        "74abd51c34f3d453",
        "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
        "4032c03f4b0b9dce",
        "c4481d294b1ae35c",
        "d6deca48fac99843",
        "1bf6ed84606767cb",
        "e8d58335129c618b",
        "5ab60946ef8c71c6",
        "793b76a59850c7bc",
        "a2e841e1bbe05146"
      ],
      "id": "793b76a59850c7bc",
      "date": 1520511451278
    },
    {
      "type": "edit",
      "id": "793b76a59850c7bc",
      "item": {
        "type": "paragraph",
        "id": "793b76a59850c7bc",
        "text": "May complain of an error, but it seems to restart OK if you wait a little."
      },
      "date": 1520511471712
    },
    {
      "item": {
        "type": "factory",
        "id": "e282e02c01df1053"
      },
      "id": "e282e02c01df1053",
      "type": "add",
      "after": "a2e841e1bbe05146",
      "date": 1520511596413
    },
    {
      "type": "move",
      "order": [
        "62022a6b10bffe0b",
        "0b1fd52d786258e2",
        "1b8ed09223393a90",
        "74abd51c34f3d453",
        "64866301-2e6d-4a0a-a1ed-0556bf7bba68",
        "4032c03f4b0b9dce",
        "c4481d294b1ae35c",
        "d6deca48fac99843",
        "1bf6ed84606767cb",
        "e8d58335129c618b",
        "5ab60946ef8c71c6",
        "793b76a59850c7bc",
        "e282e02c01df1053",
        "a2e841e1bbe05146"
      ],
      "id": "e282e02c01df1053",
      "date": 1520511598176
    },
    {
      "type": "edit",
      "id": "e282e02c01df1053",
      "item": {
        "type": "paragraph",
        "id": "e282e02c01df1053",
        "text": "# Setting the A records"
      },
      "date": 1520511615196
    },
    {
      "type": "add",
      "id": "05f38fdbdf15b0ae",
      "item": {
        "type": "paragraph",
        "id": "05f38fdbdf15b0ae",
        "text": "It can take a little while to update the DNS records. Check the progress using:"
      },
      "after": "e282e02c01df1053",
      "date": 1520511642452
    },
    {
      "type": "edit",
      "id": "e282e02c01df1053",
      "item": {
        "type": "markdown",
        "id": "e282e02c01df1053",
        "text": "# Setting the A records"
      },
      "date": 1520511646048
    },
    {
      "type": "edit",
      "id": "05f38fdbdf15b0ae",
      "item": {
        "type": "paragraph",
        "id": "05f38fdbdf15b0ae",
        "text": "It can take a little while to update the DNS records. Check the progress using [[Domain Name Tools]]. In particular try - "
      },
      "date": 1520511732689
    },
    {
      "type": "edit",
      "id": "05f38fdbdf15b0ae",
      "item": {
        "type": "paragraph",
        "id": "05f38fdbdf15b0ae",
        "text": "It can take a little while to update the DNS records. Check the progress using [[Domain Name Tools]]. In particular to check [[DNS propagation]] - [https://www.whatsmydns.net/ whatsmydns.net]"
      },
      "date": 1520511755920
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "c2ab48db121dbda3",
        "text": "- [[Domain Names]]\n- [[Domain API]]\n- [[DNS propagation]]\n- [[IP Lookup Tool]]\n- [[WHOIS]]\n"
      },
      "after": "a2e841e1bbe05146",
      "id": "c2ab48db121dbda3",
      "date": 1520512148855
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "ab633c9afaaf35d7",
        "text": "- [[Domain Name Tools]]\n- [[IP Lookup Tool]]\n- [[WHOIS]]\n- [[Domain API]]\n"
      },
      "after": "a2e841e1bbe05146",
      "id": "ab633c9afaaf35d7",
      "date": 1520512394602
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "c2ab48db121dbda3",
        "text": "- [[Domain Names]]\n- [[Domain Registration]]\n- [[DNS propagation]]\n- [[Name Servers]]\n- [[DNS]]"
      },
      "after": "a2e841e1bbe05146",
      "id": "c2ab48db121dbda3",
      "date": 1520512399920
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "ccb1cd6f39bcdad7",
        "text": "- [[Adding a new site]]\n- [[Dynamic Nginx Reconfiguration]]"
      },
      "after": "a2e841e1bbe05146",
      "id": "ccb1cd6f39bcdad7",
      "date": 1520513331840
    },
    {
      "type": "remove",
      "id": "ccb1cd6f39bcdad7",
      "date": 1520513334130
    },
    {
      "type": "edit",
      "id": "a2e841e1bbe05146",
      "item": {
        "type": "markdown",
        "id": "a2e841e1bbe05146",
        "text": "# See also\n\n- [[Wiki Admin]]\n- [[Adding a new site]]\n- [[Dynamic Nginx Reconfiguration]]"
      },
      "date": 1520513342267
    },
    {
      "type": "add",
      "id": "d675ac0b8990c16a",
      "item": {
        "type": "paragraph",
        "id": "d675ac0b8990c16a",
        "text": "even when (according to whatsmydns) the ip address has changed to the [[Atopia wiki Farm]] ip address, the old site is still being served."
      },
      "after": "05f38fdbdf15b0ae",
      "date": 1520514616853
    },
    {
      "type": "fork",
      "site": "admin.fedwiki.org",
      "date": 1520934519193
    }
  ]
}