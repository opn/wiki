{
  "title": "Relocating Forage",
  "story": [
    {
      "type": "paragraph",
      "id": "15b8d2bad86d6138",
      "text": "I moved one subdomain to another server with scp and some new A records."
    },
    {
      "type": "paragraph",
      "id": "f716832f70f9f72d",
      "text": "I copied the site in two operations which gave me a chance to look at what I was moving with my laptop file browser."
    },
    {
      "type": "code",
      "id": "b6881c23ce80760c",
      "text": "scp -r fed.wiki.org:farm/forage.ward.fed.wiki.org xx\nscp -r xx root@asia.wiki.org:.wiki/forage.asia.wiki.org\n"
    },
    {
      "type": "paragraph",
      "id": "d083357194129282",
      "text": "I checked that the site looked ok as a subdomain of the new site. Then moved it to its original domain name on the new server."
    },
    {
      "type": "code",
      "id": "53d8f8728cab3369",
      "text": "ssh asia.wiki.org\ncd .wiki\nmv forage.asia.wiki.org forage.ward.wiki.org\n"
    },
    {
      "type": "factory",
      "id": "807ae414b0cd2223"
    },
    {
      "type": "paragraph",
      "id": "6b580bdc21f33526",
      "text": "It took some effort to get chrome to let go of the old address even when dns had propagated to my laptop. I'd heard it would often resolve its own way. Firefox and Safari caught on to the change much faster."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Relocating Forage",
        "story": []
      },
      "date": 1419169809417
    },
    {
      "item": {
        "type": "factory",
        "id": "15b8d2bad86d6138"
      },
      "id": "15b8d2bad86d6138",
      "type": "add",
      "date": 1419169817631
    },
    {
      "type": "edit",
      "id": "15b8d2bad86d6138",
      "item": {
        "type": "paragraph",
        "id": "15b8d2bad86d6138",
        "text": "I moved one subdomain to another server with scp and some new A records."
      },
      "date": 1419169886197
    },
    {
      "item": {
        "type": "paragraph",
        "id": "f716832f70f9f72d",
        "text": ""
      },
      "id": "f716832f70f9f72d",
      "type": "add",
      "after": "15b8d2bad86d6138",
      "date": 1419169886206
    },
    {
      "type": "edit",
      "id": "f716832f70f9f72d",
      "item": {
        "type": "paragraph",
        "id": "f716832f70f9f72d",
        "text": "I copied the site in two operations which gave me a chance to look at what I was moving with my laptop file browser."
      },
      "date": 1419170042923
    },
    {
      "item": {
        "type": "factory",
        "id": "b6881c23ce80760c"
      },
      "id": "b6881c23ce80760c",
      "type": "add",
      "after": "f716832f70f9f72d",
      "date": 1419170057894
    },
    {
      "type": "edit",
      "id": "b6881c23ce80760c",
      "item": {
        "type": "code",
        "id": "b6881c23ce80760c",
        "text": "scp -r fed.wiki.org:farm/forage.ward.fed.wiki.org forage\nscp -r forage root@asia.wiki.org:.wiki/forage.asia.wiki.org\n"
      },
      "date": 1419170067952
    },
    {
      "type": "edit",
      "id": "b6881c23ce80760c",
      "item": {
        "type": "code",
        "id": "b6881c23ce80760c",
        "text": "scp -r fed.wiki.org:farm/forage.ward.fed.wiki.org xx\nscp -r xx root@asia.wiki.org:.wiki/forage.asia.wiki.org\n"
      },
      "date": 1419170099821
    },
    {
      "item": {
        "type": "factory",
        "id": "d083357194129282"
      },
      "id": "d083357194129282",
      "type": "add",
      "after": "b6881c23ce80760c",
      "date": 1419170198664
    },
    {
      "type": "edit",
      "id": "d083357194129282",
      "item": {
        "type": "paragraph",
        "id": "d083357194129282",
        "text": "I checked that the site looked ok as a subdomain of the new site. Then moved it to its original domain name on the new server."
      },
      "date": 1419170280659
    },
    {
      "item": {
        "type": "factory",
        "id": "1878c2914dc4145b"
      },
      "id": "1878c2914dc4145b",
      "type": "add",
      "after": "d083357194129282",
      "date": 1419170292803
    },
    {
      "type": "edit",
      "id": "1878c2914dc4145b",
      "item": {
        "type": "paragraph",
        "id": "1878c2914dc4145b",
        "text": "ssh asia.wiki.org\ncd .wiki\nmv forage.asia.wiki.org forage.ward.wiki.org\n"
      },
      "date": 1419170297747
    },
    {
      "item": {
        "type": "factory",
        "id": "53d8f8728cab3369"
      },
      "id": "53d8f8728cab3369",
      "type": "add",
      "after": "1878c2914dc4145b",
      "date": 1419170302581
    },
    {
      "type": "edit",
      "id": "53d8f8728cab3369",
      "item": {
        "type": "code",
        "id": "53d8f8728cab3369",
        "text": "ssh asia.wiki.org\ncd .wiki\nmv forage.asia.wiki.org forage.ward.wiki.org\n"
      },
      "date": 1419170307710
    },
    {
      "type": "remove",
      "id": "1878c2914dc4145b",
      "date": 1419170312831
    },
    {
      "item": {
        "type": "factory",
        "id": "807ae414b0cd2223"
      },
      "id": "807ae414b0cd2223",
      "type": "add",
      "after": "53d8f8728cab3369",
      "date": 1419170340063
    },
    {
      "item": {
        "type": "paragraph",
        "id": "6b580bdc21f33526",
        "text": ""
      },
      "id": "6b580bdc21f33526",
      "type": "add",
      "after": "807ae414b0cd2223",
      "date": 1419170574646
    },
    {
      "item": {
        "type": "paragraph",
        "id": "cce105a3537d89a8",
        "text": ""
      },
      "id": "cce105a3537d89a8",
      "type": "add",
      "after": "6b580bdc21f33526",
      "date": 1419170694995
    },
    {
      "type": "edit",
      "id": "6b580bdc21f33526",
      "item": {
        "type": "paragraph",
        "id": "6b580bdc21f33526",
        "text": "It took some effort to get chrome to let go of the old address even when dns had propagated to my laptop. I'd heard it would often resolve its own way."
      },
      "date": 1419170694986
    },
    {
      "type": "remove",
      "id": "cce105a3537d89a8",
      "date": 1419170769963
    },
    {
      "type": "edit",
      "id": "6b580bdc21f33526",
      "item": {
        "type": "paragraph",
        "id": "6b580bdc21f33526",
        "text": "It took some effort to get chrome to let go of the old address even when dns had propagated to my laptop. I'd heard it would often resolve its own way. Firefox and Safari caught on to the change much faster."
      },
      "date": 1419170805673
    },
    {
      "type": "edit",
      "id": "237f2cf6df7dedc9",
      "item": {
        "type": "paragraph",
        "id": "237f2cf6df7dedc9",
        "text": "I had a strange problem with ward.fed.wiki.org resolving incorrectly. This could be a bug in named or my misunderstanding of how it (or dns in general) interprets wildcards. I fixed it by adding this domain specifically not relying on the wildcard. No other wildcard domains were affecting. "
      },
      "date": 1419170961849
    },
    {
      "type": "fork",
      "site": "ward.asia.wiki.org",
      "date": 1437949691041
    }
  ]
}